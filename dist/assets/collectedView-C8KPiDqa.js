import{T as C,a as m,O as x}from"./constant.enum-DAK-M0ps.js";import{_ as L,a as U,F as Y,C as O}from"./dashboardTabs.vue_vue_type_script_setup_true_lang-B8YFRKVc.js";import{C as q}from"./commonDoughnutCard-CI9uphUG.js";import{_ as M,a as B}from"./SearchBar.vue_vue_type_script_setup_true_lang-Dph5Ee_w.js";import{C as G}from"./commonStatisticCard-VbEP87RL.js";import{u as R,d as W,e as Q,c as H}from"./useTransactionQueries-Cdo-GYzx.js";import{n as J}from"./notificationIcon-Ouv3nuyd.js";import{u as K}from"./axios-CQ5ThyI4.js";import{b as u}from"./index-ddJ0Efsx.js";import{u as X}from"./Input.vue_vue_type_script_setup_true_lang-CLXxopyR.js";import{_ as g}from"./Skeleton.vue_vue_type_script_setup_true_lang-RJjQvA3k.js";import{d as Z,O as _,r as T,w as ee,l as v,m as w,q as t,f as n,x as te,p as e,N as se,G as k,i as j}from"./index-DkfXgpcC.js";import"./index-DibH2ssM.js";import"./createLucideIcon-B01bX9rG.js";/* empty css                                                                           *//* empty css                                                                        */import"./commonButton.vue_vue_type_script_setup_true_lang-BT7EL6SJ.js";import"./chevron-right-DbH7sq-P.js";import"./SelectValue.vue_vue_type_script_setup_true_lang-BMjVBBvu.js";import"./chevron-down-Ctm0sjbZ.js";import"./arrow-up-right-CGBXniTS.js";import"./commonClipBoard.vue_vue_type_script_setup_true_lang-H92bW-pp.js";import"./fadeInAnimation-BTiIx4IU.js";import"./Http-BUEd-bjA.js";import"./useQuery-Di2ibVa4.js";const le={class:"px-4"},ae={class:"flex justify-between items-center"},oe={class:"flex flex-col md:flex-row my-5 gap-5 justify-between w-full"},ne={class:"h-10 w-full"},ie={class:"gap-3 w-full md:w-[60%] 2xl:w-[50%] flex justify-start lg:justify-end"},re={key:0,class:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-6"},de={class:"xl:col-span-2 col-span-3 flex xl:flex-row flex-col xs:flex-row xs:justify-center gap-6"},ue={class:"xl:flex-1 h-full flex flex-col justify-between gap-5"},ce={class:"flex flex-col justify-center items-center flex-1 bg-white p-5 rounded-xl shadow border border-neutral-70 font-publicsans relative"},me={class:"text-3xl"},fe={class:"flex flex-col justify-center items-center flex-1 bg-white p-5 rounded-xl shadow border border-neutral-70 font-publicsans relative"},pe={class:"text-3xl"},xe={key:0,class:"col-span-3 min-h-[234px] xl:h-full flex justify-end"},ge={key:1,class:"grid grid-cols-1 md:grid-cols-3 xl:grid-cols-5 gap-6 min-h-[234px]"},_e={class:"xl:col-span-2 col-span-3 flex xl:flex-row flex-col xs:flex-row xs:justify-center gap-6 h-full"},ve={class:"xl:flex-1 flex flex-col justify-between gap-5"},we={class:"col-span-3 min-h-[234px] xl:h-full flex justify-end"},be={class:"flex xl:justify-between flex-col xl:flex-row my-4"},ye={class:"xl:flex xl:flex-wrap grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2"},he={class:"xl:w-[19%] my-5 xl:my-0"},Ve={class:"my-5"},Xe=Z({__name:"collectedView",props:{status:{default:void 0},statusModifiers:{},type:{default:void 0},typeModifiers:{},operator:{default:void 0},operatorModifiers:{},limitProvider:{type:String,default:void 0},limitProviderModifiers:{}},emits:["update:status","update:type","update:operator","update:limitProvider"],setup(f){const a=R(),{width:b}=X(),{data:D,isFetching:E}=W(C.Payout),{isFetched:F,data:d}=Q(C.Payout),{startLoadingSkeleton:y,stopLoadingSkeleton:Me}=K(),[h]=_(f,"status",{set(l){return l=="all"?a.status=void 0:a.status=l,l}}),[je]=_(f,"type",{set(l){return l=="all"?a.type=void 0:a.type=l,l}}),[V]=_(f,"operator",{set(l){return l=="all"?a.operator=void 0:a.operator=l,l}}),[c,De]=_(f,"limitProvider",{set(l){return a.limit=parseInt(l),l}}),p=T("0");let o=new Date;const r=T({start:new u(o.getFullYear(),o.getMonth()+1,o.getDate()),end:new u(o.getFullYear(),o.getMonth()+1,o.getDate())}),N=async()=>{a.page=a.page+1,y()},$=async l=>{a.page=l,y()},z=async()=>{a.page=a.page-1,y()},I=()=>{p.value="",r.value.start.toDate("Africa/Abidjan"),r.value.end.toDate("Africa/Abidjan"),a.dates=[r.value.start.toDate("Africa/Abidjan"),r.value.end.toDate("Africa/Abidjan")]};return ee(p,(l,s)=>{l!=""&&(l=="1"?r.value={start:new u(o.getFullYear(),o.getMonth()+1,o.getDate()).subtract({days:parseInt("1")}),end:new u(o.getFullYear(),o.getMonth()+1,o.getDate()).subtract({days:parseInt("1")})}:r.value={start:new u(o.getFullYear(),o.getMonth()+1,o.getDate()).subtract({days:parseInt(l)}),end:new u(o.getFullYear(),o.getMonth()+1,o.getDate())},a.dates=[r.value.start.toDate("Africa/Abidjan"),r.value.end.toDate("Africa/Abidjan")])}),(l,s)=>{var S,P;return w(),v("div",le,[t("header",ae,[s[6]||(s[6]=t("div",{class:"mb-6 space-y-1"},[t("h1",{class:"text-xl font-bold font-merriweathersans leading-6 text-black"},"Gestion des collectes"),t("p",{class:"text-neutral-30 text-sm font-normal"},"Suivez, gérez et prévoyez les collectes de vos utilisateurs ")],-1)),t("div",null,[n(J)])]),t("section",oe,[t("div",ne,[n(L,{modelValue:p.value,"onUpdate:modelValue":s[0]||(s[0]=i=>p.value=i),class:"w-full"},null,8,["modelValue"])]),t("div",ie,[n(U,{"update-handler":I,modelValue:r.value,"onUpdate:modelValue":s[1]||(s[1]=i=>r.value=i)},null,8,["modelValue"])])]),n(Y,null,{default:te(()=>{var i,A;return[e(F)?(w(),v("section",re,[t("div",de,[n(G,{class:"xl:flex-1",amount:e(d).sum_txns.toString(),"sub-title":"L'essentiel des volumes collectés",id:2,title:"Volume collecté"},null,8,["amount"]),t("div",ue,[t("section",ce,[s[7]||(s[7]=t("p",{class:"text-xs text-center"},"Nombre de réussites",-1)),t("p",me,k((i=e(d))==null?void 0:i.count_txns_success),1),s[8]||(s[8]=t("div",{class:"absolute top-0 bottom-[-1px] right-0 left-0 border-b-2 border-red-400 rounded-lg"},null,-1))]),t("section",fe,[s[9]||(s[9]=t("p",{class:"text-xs text-center"},"Nombre d'echecs",-1)),t("p",pe,k((A=e(d))==null?void 0:A.count_txns_failed),1),s[10]||(s[10]=t("div",{class:"absolute top-0 bottom-[-1px] right-0 left-0 border-b-2 border-red-400 rounded-lg"},null,-1))])])]),e(F)?(w(),v("div",xe,[n(q,{count_txns_failed:e(d).count_txns_failed,count_txns_success:e(d).count_txns_success,sum_txns:e(d).sum_txns,sum_txns_amount_group_by_provider:e(d).sum_txns_amount_group_by_provider,class:"w-full"},null,8,["count_txns_failed","count_txns_success","sum_txns","sum_txns_amount_group_by_provider"])])):se("",!0)])):(w(),v("section",ge,[t("div",_e,[n(g,{class:"xl:flex-1 w-full rounded-lg"}),t("div",ve,[n(g,{class:"flex-1 w-full rounded-xl"}),n(g,{class:"flex-1 w-full rounded-xl"})])]),t("div",we,[n(g,{class:"w-full h-full rounded-lg"})])]))]}),_:1}),t("div",be,[t("section",ye,[n(M,{modelValue:e(h),"onUpdate:modelValue":s[2]||(s[2]=i=>j(h)?h.value=i:null),"default-width":e(b)>=1366?"w-fit":"w-full",class:"w-full",title:"Filtre par statut",elements:[{name:"Filtre par statut",value:"all"},{name:"En attente",value:e(m).Pending},{name:"En cours ",value:e(m).Processing},{name:"Effectué",value:e(m).Success},{name:"Echoué ",value:e(m).Failed},{name:"Remboursé ",value:e(m).Refunded}]},null,8,["modelValue","default-width","elements"]),n(M,{modelValue:e(c),"onUpdate:modelValue":s[3]||(s[3]=i=>j(c)?c.value=i:null),"default-width":e(b)>=1366?"w-fit":"w-full",class:"w-full",title:"Lignes par page",elements:[{name:"Lignes par page",value:"10"},{name:"20",value:"20"},{name:"50",value:"50"},{name:"100",value:"100"}]},null,8,["modelValue","default-width"]),n(M,{modelValue:e(V),"onUpdate:modelValue":s[4]||(s[4]=i=>j(V)?V.value=i:null),"default-width":e(b)>=1366?"w-fit":"w-full",class:"w-full",title:"Filtre par operateur",elements:[{name:"Filtre par operateur",value:"all"},{name:"Orange",value:e(x).Orange},{name:"MTN",value:e(x).Mtn},{name:"Moov",value:e(x).Moov},{name:"Wave",value:e(x).Wave}]},null,8,["modelValue","default-width","elements"])]),t("section",he,[n(B,{"is-loading":e(E)&&e(a).q!==void 0,modelValue:e(a).q,"onUpdate:modelValue":s[5]||(s[5]=i=>e(a).q=i)},null,8,["is-loading","modelValue"])])]),t("section",Ve,[n(O,{"dynamic-width-columns":!1,"page-size":e(c)?parseInt(e(c)):10,ref:"my-table","default-page":e(a).page,total:((S=e(D))==null?void 0:S.total)??0,columns:e(H),data:((P=e(D))==null?void 0:P.items)??[],onGoToPage:$,onPrevPage:z,onNextPage:N},null,8,["page-size","default-page","total","columns","data"])])])}}});export{Xe as default};
