import{ad as e,ae as w,af as d,k as c,ag as l}from"./index-DkfXgpcC.js";import{j as n}from"./axios-CQ5ThyI4.js";import{u as f}from"./useAuthStore-C2GFTR6E.js";async function h(r){return await n.post(e.login,r)}async function m(){return await n.get(e.profile)}async function y({password:r,new_password:a}){return await n.post(e.updatePassword,{password:r,new_password:a})}async function g({email:r}){return await n.post(e.forgetPassword,{email:r})}async function A(r){return await n.post(e.resetPassword(r.token),{new_password:r.new_password,confirmed_password:r.confirmed_password})}async function P(){return await n.post(e.logout,{headers:{Authorization:w()}})}async function Q({email:r,password:a}){var s,o;const t=c();try{const u={email:r.toLowerCase().trim(),password:a.trim()},i=await h(u),{token:p}=((s=i.data)==null?void 0:s.data)??{};return l(p),i.data}catch(u){const i=u;t.error(((o=i.response)==null?void 0:o.data.error)??"Quelque chose s'est mal passé")}}async function _(r){var t;const a=c();try{return(await y(r)).data}catch(s){const o=s;throw a.error(((t=o.response)==null?void 0:t.data.error)??"Quelque chose s'est mal passé"),s}}async function T({email:r}){var t;const a=c();try{return(await g({email:r})).data}catch(s){const o=s;throw a.error(((t=o.response)==null?void 0:t.data.error)??"Quelque chose s'est mal passé"),s}}async function v(r){var t;const a=c();try{return(await A(r)).data}catch(s){const o=s;throw a.error(((t=o.response)==null?void 0:t.data.error)??"Quelque chose s'est mal passé"),s}}async function x(){var t;const r=c(),{setUser:a}=f();try{const s=await m();return a(s.data.data),s.data.data}catch(s){const o=s;r.error(((t=o.response)==null?void 0:t.data.message)??"Quelque chose s'est mal passé")}}async function C(){try{const r=await P();d()}catch{d()}}export{C as a,T as b,x as f,Q as l,v as r,_ as u};
